import{r as n,j as e,Q as Y,a as Ue}from"./app-B-K0hjgr.js";import{G as z}from"./iconBase-CBkgUSac.js";import{A as Z}from"./AppLayout-DFapAJlL.js";import{C as X}from"./Container-DWTW3xY2.js";import{S as Ge}from"./Spinner-NISYRIN6.js";import{A as Ke}from"./Alert-wVRSdflJ.js";import{B as $}from"./Button-W4bWWUZc.js";import{m as C}from"./proxy-D13OQ7Nq.js";import{R as pe}from"./Row-BiCn9w2K.js";import{u as te,c as _,a as ze,C as ee}from"./warning-BObDLodT.js";import{f as Qe,m as xe,F as ve}from"./Form-BaupVG3R.js";import{c as Je,b as je,t as qe,T as Ye,d as Ze}from"./Fade-Bte0z7lT.js";import{u as et}from"./useTimeout-CsKRHCo1.js";import{A as ge}from"./Anchor-BR1TacBh.js";import{a as tt}from"./hook-Eqe3CG1E.js";import{C as f}from"./Card-Ciopa8ar.js";import{B as ye}from"./Badge-BYp3-OKZ.js";import"./useIsomorphicEffect-DRx4ltPc.js";import"./hasClass-D2lcPUFr.js";import"./AbstractModalHeader-hnvaFR5z.js";import"./CloseButton-ufObt245.js";import"./divWithClassName-Bj92fJDL.js";import"./InputGroupContext-DO8QwHuR.js";import"./useWillUnmount-ByWpdGZ0.js";function st(a,l){const d=n.useRef(!0);n.useEffect(()=>{if(d.current){d.current=!1;return}return a()},l)}const ke=n.forwardRef(({className:a,bsPrefix:l,as:d="div",...N},b)=>(l=te(l,"carousel-caption"),e.jsx(d,{ref:b,className:_(a,l),...N})));ke.displayName="CarouselCaption";const Se=n.forwardRef(({as:a="div",bsPrefix:l,className:d,...N},b)=>{const p=_(d,te(l,"carousel-item"));return e.jsx(a,{ref:b,...N,className:p})});Se.displayName="CarouselItem";const nt=40;function rt(a){if(!a||!a.style||!a.parentNode||!a.parentNode.style)return!1;const l=getComputedStyle(a);return l.display!=="none"&&l.visibility!=="hidden"&&getComputedStyle(a.parentNode).display!=="none"}const Le=n.forwardRef(({defaultActiveIndex:a=0,...l},d)=>{const{as:N="div",bsPrefix:b,slide:p=!0,fade:U=!1,controls:se=!0,indicators:S=!0,indicatorLabels:P=[],activeIndex:x,onSelect:v,onSlide:A,onSlid:T,interval:c=5e3,keyboard:B=!0,onKeyDown:j,pause:u="hover",onMouseOver:O,onMouseOut:E,wrap:w=!0,touch:H=!0,onTouchStart:I,onTouchMove:W,onTouchEnd:t,prevIcon:o=e.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:k="Previous",nextIcon:Re=e.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:ne="Next",variant:re,className:Ae,children:Q,...Te}=tt({defaultActiveIndex:a,...l},{activeIndex:"onSelect"}),g=te(b,"carousel"),D=ze(),F=n.useRef(null),[ae,ie]=n.useState("next"),[Ie,G]=n.useState(!1),[M,le]=n.useState(!1),[i,De]=n.useState(x||0);n.useEffect(()=>{!M&&x!==i&&(F.current?ie(F.current):ie((x||0)>i?"next":"prev"),p&&le(!0),De(x||0))},[x,M,i,p]),n.useEffect(()=>{F.current&&(F.current=null)});let L=0,oe;Qe(Q,(s,r)=>{++L,r===x&&(oe=s.props.interval)});const ce=Je(oe),m=n.useCallback(s=>{if(M)return;let r=i-1;if(r<0){if(!w)return;r=L-1}F.current="prev",v==null||v(r,s)},[M,i,v,w,L]),h=je(s=>{if(M)return;let r=i+1;if(r>=L){if(!w)return;r=0}F.current="next",v==null||v(r,s)}),J=n.useRef();n.useImperativeHandle(d,()=>({element:J.current,prev:m,next:h}));const de=je(()=>{!document.hidden&&rt(J.current)&&(D?m():h())}),R=ae==="next"?"start":"end";st(()=>{p||(A==null||A(i,R),T==null||T(i,R))},[i]);const Fe=`${g}-item-${ae}`,Me=`${g}-item-${R}`,$e=n.useCallback(s=>{qe(s),A==null||A(i,R)},[A,i,R]),Pe=n.useCallback(()=>{le(!1),T==null||T(i,R)},[T,i,R]),Be=n.useCallback(s=>{if(B&&!/input|textarea/i.test(s.target.tagName))switch(s.key){case"ArrowLeft":s.preventDefault(),D?h(s):m(s);return;case"ArrowRight":s.preventDefault(),D?m(s):h(s);return}j==null||j(s)},[B,j,m,h,D]),Oe=n.useCallback(s=>{u==="hover"&&G(!0),O==null||O(s)},[u,O]),He=n.useCallback(s=>{G(!1),E==null||E(s)},[E]),ue=n.useRef(0),K=n.useRef(0),me=et(),We=n.useCallback(s=>{ue.current=s.touches[0].clientX,K.current=0,u==="hover"&&G(!0),I==null||I(s)},[u,I]),Ve=n.useCallback(s=>{s.touches&&s.touches.length>1?K.current=0:K.current=s.touches[0].clientX-ue.current,W==null||W(s)},[W]),Xe=n.useCallback(s=>{if(H){const r=K.current;Math.abs(r)>nt&&(r>0?m(s):h(s))}u==="hover"&&me.set(()=>{G(!1)},c||void 0),t==null||t(s)},[H,u,m,h,me,c,t]),he=c!=null&&!Ie&&!M,q=n.useRef();n.useEffect(()=>{var s,r;if(!he)return;const y=D?m:h;return q.current=window.setInterval(document.visibilityState?de:y,(s=(r=ce.current)!=null?r:c)!=null?s:void 0),()=>{q.current!==null&&clearInterval(q.current)}},[he,m,h,ce,c,de,D]);const fe=n.useMemo(()=>S&&Array.from({length:L},(s,r)=>y=>{v==null||v(r,y)}),[S,L,v]);return e.jsxs(N,{ref:J,...Te,onKeyDown:Be,onMouseOver:Oe,onMouseOut:He,onTouchStart:We,onTouchMove:Ve,onTouchEnd:Xe,className:_(Ae,g,p&&"slide",U&&`${g}-fade`,re&&`${g}-${re}`),children:[S&&e.jsx("div",{className:`${g}-indicators`,children:xe(Q,(s,r)=>e.jsx("button",{type:"button","data-bs-target":"","aria-label":P!=null&&P.length?P[r]:`Slide ${r+1}`,className:r===i?"active":void 0,onClick:fe?fe[r]:void 0,"aria-current":r===i},r))}),e.jsx("div",{className:`${g}-inner`,children:xe(Q,(s,r)=>{const y=r===i;return p?e.jsx(Ye,{in:y,onEnter:y?$e:void 0,onEntered:y?Pe:void 0,addEndListener:Ze,children:(V,_e)=>n.cloneElement(s,{..._e,className:_(s.props.className,y&&V!=="entered"&&Fe,(V==="entered"||V==="exiting")&&"active",(V==="entering"||V==="exiting")&&Me)})}):n.cloneElement(s,{className:_(s.props.className,y&&"active")})})}),se&&e.jsxs(e.Fragment,{children:[(w||x!==0)&&e.jsxs(ge,{className:`${g}-control-prev`,onClick:m,children:[o,k&&e.jsx("span",{className:"visually-hidden",children:k})]}),(w||x!==L-1)&&e.jsxs(ge,{className:`${g}-control-next`,onClick:h,children:[Re,ne&&e.jsx("span",{className:"visually-hidden",children:ne})]})]})]})});Le.displayName="Carousel";const Ce=Object.assign(Le,{Caption:ke,Item:Se});function Ne(a){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(a)}function be(a){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(a)}function Ee(a){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(a)}function we(a){return z({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(a)}function Rt(){const[a,l]=n.useState([]),[d,N]=n.useState(!0),[b,p]=n.useState(null),[U,se]=n.useState(""),[S,P]=n.useState("All"),[x,v]=n.useState(!1),[A,T]=n.useState(null),[c,B]=n.useState([]),[j,u]=n.useState("upcoming"),O=["All","Political Rally","Community Engagement","Party Meeting","Campaign Event","Policy Debate","Fundraiser","Press Event","Business Engagement"];n.useEffect(()=>{(async()=>{try{const o=await Ue.get(route("api.events"));l(o.data),N(!1)}catch(o){p(o.message),N(!1),console.error("Error fetching events:",o)}})()},[]);const E=a.filter(t=>{const o=t.title.toLowerCase().includes(U.toLowerCase())||t.description.toLowerCase().includes(U.toLowerCase()),k=S==="All"||t.category===S;return o&&k}).filter(t=>{const o=new Date(t.date),k=new Date;return k.setHours(0,0,0,0),j==="upcoming"?o>=k:j==="past"?o<k:!0}),w=t=>{c.includes(t)?B(c.filter(o=>o!==t)):B([...c,t])},H={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},I={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},W={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return d?e.jsxs(Z,{children:[e.jsx(Y,{title:"Events"}),e.jsxs(X,{className:"text-center py-5",children:[e.jsx(Ge,{animation:"border",role:"status",className:"me-2"}),e.jsx("span",{children:"Loading events..."})]})]}):b?e.jsxs(Z,{children:[e.jsx(Y,{title:"Events"}),e.jsxs(X,{className:"py-5 text-center",children:[e.jsxs(Ke,{variant:"danger",children:["Error loading events: ",b]}),e.jsx($,{variant:"primary",onClick:()=>window.location.reload(),children:"Try Again"})]})]}):e.jsxs(Z,{children:[e.jsx(Y,{title:"Events"}),e.jsxs(X,{fluid:!0,className:"events-page px-0",children:[e.jsxs("div",{className:"hero-section",children:[e.jsx("div",{className:"hero-overlay"}),e.jsx(X,{className:"hero-content",children:e.jsxs(C.div,{initial:"hidden",animate:"visible",variants:H,children:[e.jsx(C.h1,{className:"display-4 fw-bold text-white mb-4",variants:I,children:"EPA: Our Journey Together"}),e.jsx(C.p,{className:"lead text-white mb-5",variants:I,children:"Discover and engage with upcoming events from the Alliance for Democracy."})]})})]}),e.jsxs(X,{className:"py-5",children:[e.jsxs(pe,{className:"mb-5",children:[e.jsx(ee,{md:8,children:e.jsxs("div",{className:"filter-buttons",children:[e.jsx($,{variant:j==="all"?"primary":"outline-secondary",onClick:()=>u("all"),className:"me-2",children:"All Events"}),e.jsx($,{variant:j==="upcoming"?"primary":"outline-secondary",onClick:()=>u("upcoming"),className:"me-2",children:"Upcoming"}),e.jsx($,{variant:j==="past"?"primary":"outline-secondary",onClick:()=>u("past"),children:"Past Events"})]})}),e.jsx(ee,{md:4,className:"text-md-end",children:e.jsx(ve.Group,{controlId:"categoryFilter",className:"d-inline-block",children:e.jsx(ve.Select,{value:S,onChange:t=>P(t.target.value),className:"category-select",children:O.map(t=>e.jsx("option",{value:t,children:t},t))})})})]}),E.some(t=>t.featured)&&e.jsxs(C.div,{className:"mb-5",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h3",{className:"section-title mb-4",children:"Featured EPA Events"}),e.jsx(Ce,{indicators:!1,className:"featured-carousel",children:E.filter(t=>t.featured).map(t=>e.jsx(Ce.Item,{children:e.jsx(C.div,{whileHover:{scale:1.02},transition:{duration:.3},children:e.jsxs(f,{className:"featured-event-card",children:[e.jsxs("div",{className:"card-image-wrapper",children:[e.jsx(f.Img,{variant:"top",src:t.image}),e.jsx(ye,{bg:"danger",className:"featured-badge",children:"Featured"}),e.jsx($,{variant:"link",className:`favorite-btn ${c.includes(t.id)?"active":""}`,onClick:()=>w(t.id),children:e.jsx(Ee,{})})]}),e.jsxs(f.Body,{children:[e.jsx(f.Title,{children:t.title}),e.jsxs("div",{className:"event-meta mb-3",children:[e.jsxs("span",{children:[e.jsx(Ne,{})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("span",{children:[e.jsx(be,{})," ",t.time]}),e.jsxs("span",{children:[e.jsx(we,{})," ",t.location]})]}),e.jsx(f.Text,{children:t.description})]})]})})},t.id))})]}),e.jsx("h3",{className:"section-title mb-4",children:"All EPA Events"}),E.length>0?e.jsx(C.div,{variants:H,initial:"hidden",animate:"visible",children:e.jsx(pe,{children:E.map(t=>e.jsx(ee,{lg:4,md:6,className:"mb-4",children:e.jsx(C.div,{variants:W,whileHover:{y:-5},whileTap:{scale:.98},transition:{duration:.3},children:e.jsxs(f,{className:"event-card h-100",children:[e.jsxs("div",{className:"card-image-wrapper",children:[e.jsx(f.Img,{variant:"top",src:t.image}),e.jsx($,{variant:"link",className:`favorite-btn ${c.includes(t.id)?"active":""}`,onClick:()=>w(t.id),children:e.jsx(C.div,{animate:{scale:c.includes(t.id)?[1,1.2,1]:1},transition:{duration:.3},children:e.jsx(Ee,{})})}),t.featured&&e.jsx(ye,{bg:"danger",className:"featured-badge",children:"Featured"})]}),e.jsxs(f.Body,{children:[e.jsx(f.Title,{children:t.title}),e.jsxs("div",{className:"event-meta mb-3",children:[e.jsxs("span",{children:[e.jsx(Ne,{})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("span",{children:[e.jsx(be,{})," ",t.time]}),e.jsxs("span",{children:[e.jsx(we,{})," ",t.location]})]}),e.jsx(f.Text,{className:"text-muted",children:t.description})]})]})})},t.id))})}):e.jsxs(C.div,{className:"text-center py-5",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h4",{children:"No EPA events found"}),e.jsx("p",{children:"Try adjusting your search or filters to see more events."})]})]})]})]})}export{Rt as default};
