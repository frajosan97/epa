import{r,j as e,Q as z,a as Ue}from"./app-DGPKRCmx.js";import{G as H}from"./iconBase-eqUq4iHE.js";import{A as Q}from"./AppLayout-C4k2M3m_.js";import{H as Ge,B as he}from"./HeroBanner-YDPQKUP6.js";import{C as V}from"./Container-BLEuVzXM.js";import{S as Ke}from"./Spinner-DbnPYo0l.js";import{A as ze}from"./Alert-BeIlRc1-.js";import{B as I}from"./Button-XaRRVv9X.js";import{R as fe}from"./Row-BoIF-oDO.js";import{u as q,c as M,b as Qe,h as Ve,m as pe,C as J,F as xe}from"./Form-CB9LuN8U.js";import{c as Je,b as je,t as qe,T as Ye,d as Ze}from"./Fade-CLtR-Esh.js";import{u as et}from"./useTimeout-DXcDlvj8.js";import{A as ge}from"./Anchor-D-5PP9bk.js";import{a as tt}from"./hook-vlQNqf5i.js";import{C as p}from"./Card-B7w6PbBV.js";import"./InputGroup-96oBvNR-.js";import"./AbstractModalHeader-CQwgUO8b.js";import"./hasClass-CuBFhRo9.js";import"./CloseButton-9jajezdr.js";import"./useIsomorphicEffect-DE0Xtg7R.js";import"./divWithClassName-C_NyWSye.js";import"./useWillUnmount-BvdwbJDC.js";function st(a,o){const m=r.useRef(!0);r.useEffect(()=>{if(m.current){m.current=!1;return}return a()},o)}const be=r.forwardRef(({className:a,bsPrefix:o,as:m="div",...C},N)=>(o=q(o,"carousel-caption"),e.jsx(m,{ref:N,className:M(a,o),...C})));be.displayName="CarouselCaption";const ke=r.forwardRef(({as:a="div",bsPrefix:o,className:m,...C},N)=>{const x=M(m,q(o,"carousel-item"));return e.jsx(a,{ref:N,...C,className:x})});ke.displayName="CarouselItem";const rt=40;function nt(a){if(!a||!a.style||!a.parentNode||!a.parentNode.style)return!1;const o=getComputedStyle(a);return o.display!=="none"&&o.visibility!=="hidden"&&getComputedStyle(a.parentNode).display!=="none"}const Se=r.forwardRef(({defaultActiveIndex:a=0,...o},m)=>{const{as:C="div",bsPrefix:N,slide:x=!0,fade:B=!1,controls:Y=!0,indicators:E=!0,indicatorLabels:D=[],activeIndex:c,onSelect:d,onSlide:u,onSlid:j,interval:b=5e3,keyboard:k=!0,onKeyDown:L,pause:t="hover",onMouseOver:l,onMouseOut:g,wrap:F=!0,touch:Z=!0,onTouchStart:W,onTouchMove:X,onTouchEnd:_,prevIcon:we=e.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:ee="Previous",nextIcon:Le=e.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:te="Next",variant:se,className:Re,children:U,...Ae}=tt({defaultActiveIndex:a,...o},{activeIndex:"onSelect"}),v=q(N,"carousel"),R=Qe(),A=r.useRef(null),[re,ne]=r.useState("next"),[Te,P]=r.useState(!1),[T,ae]=r.useState(!1),[i,Ie]=r.useState(c||0);r.useEffect(()=>{!T&&c!==i&&(A.current?ne(A.current):ne((c||0)>i?"next":"prev"),x&&ae(!0),Ie(c||0))},[c,T,i,x]),r.useEffect(()=>{A.current&&(A.current=null)});let S=0,ie;Ve(U,(s,n)=>{++S,n===c&&(ie=s.props.interval)});const le=Je(ie),h=r.useCallback(s=>{if(T)return;let n=i-1;if(n<0){if(!F)return;n=S-1}A.current="prev",d==null||d(n,s)},[T,i,d,F,S]),f=je(s=>{if(T)return;let n=i+1;if(n>=S){if(!F)return;n=0}A.current="next",d==null||d(n,s)}),G=r.useRef();r.useImperativeHandle(m,()=>({element:G.current,prev:h,next:f}));const oe=je(()=>{!document.hidden&&nt(G.current)&&(R?h():f())}),w=re==="next"?"start":"end";st(()=>{x||(u==null||u(i,w),j==null||j(i,w))},[i]);const De=`${v}-item-${re}`,Fe=`${v}-item-${w}`,$e=r.useCallback(s=>{qe(s),u==null||u(i,w)},[u,i,w]),Me=r.useCallback(()=>{ae(!1),j==null||j(i,w)},[j,i,w]),Be=r.useCallback(s=>{if(k&&!/input|textarea/i.test(s.target.tagName))switch(s.key){case"ArrowLeft":s.preventDefault(),R?f(s):h(s);return;case"ArrowRight":s.preventDefault(),R?h(s):f(s);return}L==null||L(s)},[k,L,h,f,R]),Pe=r.useCallback(s=>{t==="hover"&&P(!0),l==null||l(s)},[t,l]),Oe=r.useCallback(s=>{P(!1),g==null||g(s)},[g]),ce=r.useRef(0),O=r.useRef(0),de=et(),He=r.useCallback(s=>{ce.current=s.touches[0].clientX,O.current=0,t==="hover"&&P(!0),W==null||W(s)},[t,W]),We=r.useCallback(s=>{s.touches&&s.touches.length>1?O.current=0:O.current=s.touches[0].clientX-ce.current,X==null||X(s)},[X]),Xe=r.useCallback(s=>{if(Z){const n=O.current;Math.abs(n)>rt&&(n>0?h(s):f(s))}t==="hover"&&de.set(()=>{P(!1)},b||void 0),_==null||_(s)},[Z,t,h,f,de,b,_]),ue=b!=null&&!Te&&!T,K=r.useRef();r.useEffect(()=>{var s,n;if(!ue)return;const y=R?h:f;return K.current=window.setInterval(document.visibilityState?oe:y,(s=(n=le.current)!=null?n:b)!=null?s:void 0),()=>{K.current!==null&&clearInterval(K.current)}},[ue,h,f,le,b,oe,R]);const me=r.useMemo(()=>E&&Array.from({length:S},(s,n)=>y=>{d==null||d(n,y)}),[E,S,d]);return e.jsxs(C,{ref:G,...Ae,onKeyDown:Be,onMouseOver:Pe,onMouseOut:Oe,onTouchStart:He,onTouchMove:We,onTouchEnd:Xe,className:M(Re,v,x&&"slide",B&&`${v}-fade`,se&&`${v}-${se}`),children:[E&&e.jsx("div",{className:`${v}-indicators`,children:pe(U,(s,n)=>e.jsx("button",{type:"button","data-bs-target":"","aria-label":D!=null&&D.length?D[n]:`Slide ${n+1}`,className:n===i?"active":void 0,onClick:me?me[n]:void 0,"aria-current":n===i},n))}),e.jsx("div",{className:`${v}-inner`,children:pe(U,(s,n)=>{const y=n===i;return x?e.jsx(Ye,{in:y,onEnter:y?$e:void 0,onEntered:y?Me:void 0,addEndListener:Ze,children:($,_e)=>r.cloneElement(s,{..._e,className:M(s.props.className,y&&$!=="entered"&&De,($==="entered"||$==="exiting")&&"active",($==="entering"||$==="exiting")&&Fe)})}):r.cloneElement(s,{className:M(s.props.className,y&&"active")})})}),Y&&e.jsxs(e.Fragment,{children:[(F||c!==0)&&e.jsxs(ge,{className:`${v}-control-prev`,onClick:h,children:[we,ee&&e.jsx("span",{className:"visually-hidden",children:ee})]}),(F||c!==S-1)&&e.jsxs(ge,{className:`${v}-control-next`,onClick:f,children:[Le,te&&e.jsx("span",{className:"visually-hidden",children:te})]})]})]})});Se.displayName="Carousel";const ve=Object.assign(Se,{Caption:be,Item:ke});function ye(a){return H({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(a)}function Ce(a){return H({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(a)}function Ne(a){return H({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},child:[]}]})(a)}function Ee(a){return H({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(a)}function wt(){const[a,o]=r.useState([]),[m,C]=r.useState(!0),[N,x]=r.useState(null),[B,Y]=r.useState(""),[E,D]=r.useState("All"),[c,d]=r.useState([]),[u,j]=r.useState("upcoming"),b=["All","Political Rally","Community Engagement","Party Meeting","Campaign Event","Policy Debate","Fundraiser","Press Event","Business Engagement"];r.useEffect(()=>{(async()=>{try{const l=await Ue.get(route("api.events"));o(l.data),C(!1)}catch(l){x(l.message),C(!1),console.error("Error fetching events:",l)}})()},[]);const k=a.filter(t=>{const l=t.title.toLowerCase().includes(B.toLowerCase())||t.description.toLowerCase().includes(B.toLowerCase()),g=E==="All"||t.category===E;return l&&g}).filter(t=>{const l=new Date(t.date),g=new Date;return g.setHours(0,0,0,0),u==="upcoming"?l>=g:u==="past"?l<g:!0}),L=t=>{c.includes(t)?d(c.filter(l=>l!==t)):d([...c,t])};return m?e.jsxs(Q,{children:[e.jsx(z,{title:"Events"}),e.jsxs(V,{className:"text-center py-5",children:[e.jsx(Ke,{animation:"border",role:"status",className:"me-2"}),e.jsx("span",{children:"Loading events..."})]})]}):N?e.jsxs(Q,{children:[e.jsx(z,{title:"Events"}),e.jsxs(V,{className:"py-5 text-center",children:[e.jsxs(ze,{variant:"danger",children:["Error loading events: ",N]}),e.jsx(I,{variant:"primary",onClick:()=>window.location.reload(),children:"Try Again"})]})]}):e.jsxs(Q,{children:[e.jsx(z,{title:"Events"}),e.jsx(Ge,{data:{title:"EPA: Our Journey Together",subtitle:"Discover and engage with upcoming events from the Alliance for Democracy."}}),e.jsxs(V,{className:"py-5",children:[e.jsxs(fe,{className:"mb-5",children:[e.jsx(J,{md:8,children:e.jsxs("div",{className:"filter-buttons",children:[e.jsx(I,{variant:u==="all"?"primary":"outline-secondary",onClick:()=>j("all"),className:"me-2",children:"All Events"}),e.jsx(I,{variant:u==="upcoming"?"primary":"outline-secondary",onClick:()=>j("upcoming"),className:"me-2",children:"Upcoming"}),e.jsx(I,{variant:u==="past"?"primary":"outline-secondary",onClick:()=>j("past"),children:"Past Events"})]})}),e.jsx(J,{md:4,className:"text-md-end",children:e.jsx(xe.Group,{controlId:"categoryFilter",className:"d-inline-block",children:e.jsx(xe.Select,{value:E,onChange:t=>D(t.target.value),className:"category-select",children:b.map(t=>e.jsx("option",{value:t,children:t},t))})})})]}),k.some(t=>t.featured)&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h3",{className:"section-title mb-4",children:"Featured EPA Events"}),e.jsx(ve,{indicators:!1,className:"featured-carousel",children:k.filter(t=>t.featured).map(t=>e.jsx(ve.Item,{children:e.jsxs(p,{className:"featured-event-card",children:[e.jsxs("div",{className:"card-image-wrapper",children:[e.jsx(p.Img,{variant:"top",src:`/storage/images/gallery/${t.image}`}),e.jsx(he,{bg:"danger",className:"featured-badge",children:"Featured"}),e.jsx(I,{variant:"link",className:`favorite-btn ${c.includes(t.id)?"active":""}`,onClick:()=>L(t.id),children:e.jsx(Ne,{})})]}),e.jsxs(p.Body,{children:[e.jsx(p.Title,{children:t.title}),e.jsxs("div",{className:"event-meta mb-3",children:[e.jsxs("span",{children:[e.jsx(ye,{})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("span",{children:[e.jsx(Ce,{})," ",t.time]}),e.jsxs("span",{children:[e.jsx(Ee,{})," ",t.location]})]}),e.jsx(p.Text,{children:t.description})]})]})},t.id))})]}),e.jsx("h3",{className:"section-title mb-4",children:"All EPA Events"}),k.length>0?e.jsx(fe,{children:k.map(t=>e.jsx(J,{lg:4,md:6,className:"mb-4",children:e.jsxs(p,{className:"event-card h-100",children:[e.jsxs("div",{className:"card-image-wrapper",children:[e.jsx(p.Img,{variant:"top",src:`/storage/images/gallery/${t.image}`}),e.jsx(I,{variant:"link",className:`favorite-btn ${c.includes(t.id)?"active":""}`,onClick:()=>L(t.id),children:e.jsx(Ne,{})}),t.featured&&e.jsx(he,{bg:"danger",className:"featured-badge",children:"Featured"})]}),e.jsxs(p.Body,{children:[e.jsx(p.Title,{children:t.title}),e.jsxs("div",{className:"event-meta mb-3",children:[e.jsxs("span",{children:[e.jsx(ye,{})," ",new Date(t.date).toLocaleDateString()]}),e.jsxs("span",{children:[e.jsx(Ce,{})," ",t.time]}),e.jsxs("span",{children:[e.jsx(Ee,{})," ",t.location]})]}),e.jsx(p.Text,{className:"text-muted",children:t.description})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("h4",{children:"No EPA events found"}),e.jsx("p",{children:"Try adjusting your search or filters to see more events."})]})]})]})}export{wt as default};
